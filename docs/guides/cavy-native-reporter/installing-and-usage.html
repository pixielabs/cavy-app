<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using Cavy Native Reporter · Cavy</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Cavy Native Reporter allows you to send your Cavy test results to native"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using Cavy Native Reporter · Cavy"/><meta property="og:type" content="website"/><meta property="og:url" content="https://cavy.app/"/><meta property="og:description" content="Cavy Native Reporter allows you to send your Cavy test results to native"/><meta property="og:image" content="https://cavy.app/img/cavy.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://cavy.app/img/cavy.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-42424366-31', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="Cavy"/><h2 class="headerTitleWithLogo">Cavy</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started/installing" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/docs/api/helpers" target="_self">API</a></li><li class=""><a href="https://github.com/pixielabs/cavy" target="_self">GitHub</a></li><li class=""><a href="/docs/faq" target="_self">FAQ</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Cavy Native Reporter</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/getting-started/installing">Installing</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/setting-cavy-up">Setting up the Cavy Tester</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Writing tests</h4><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started/hooking-up-components">Hooking up components</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/writing-tests">Writing test cases</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/getting-started/running-tests">Running tests</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/guides/specifing-a-custom-app-entry-point">Specifing a custom app entry point</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/writing-spec-helpers">Writing your own spec helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/writing-custom-reporters">Writing your own custom reporter</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Cavy Native Reporter</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/guides/cavy-native-reporter/installing-and-usage">Using Cavy Native Reporter</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/cavy-native-reporter/reporting-to-ios-xctest-objective-c">iOS XCTest example (Obj-C)</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/cavy-native-reporter/reporting-to-ios-xctest-swift">iOS XCTest example (Swift)</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/cavy-native-reporter/reporting-to-android">Android example (JUnit)</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/api/commands">CLI Commands</a></li><li class="navListItem"><a class="navItem" href="/docs/api/helpers">Helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/api/tester">Tester Component</a></li><li class="navListItem"><a class="navItem" href="/docs/api/test-hooks">Test Hooks</a></li><li class="navListItem"><a class="navItem" href="/docs/api/cavy-native-reporter">Cavy Native Reporter</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Using Cavy Native Reporter</h1></header><article><div><span><p>Cavy Native Reporter allows you to send your Cavy test results to native
Android and iOS test runners.</p>
<p>By default Cavy reports a completed test run to <a href="/docs/getting-started/installing">cavy-cli</a>.
Cavy Native Reporter provides an alternative reporter for Cavy which fires
a Native Module callback when tests are finished. You can then wire this
in to a native test runner such as XCTest.</p>
<h2><a class="anchor" aria-hidden="true" id="when-would-i-want-to-use-cavy-native-reporter"></a><a href="#when-would-i-want-to-use-cavy-native-reporter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When would I want to use Cavy Native Reporter?</h2>
<p>You may want to do this if you already have some application tests that are
native, e.g. if you already use XCTest to test parts of your app. This could
be because not all of your app is React Native, or if your app makes heavy
use of native code. You may also want to use it if you have an existing
CI pipeline set up for running a native test framework, and don't want to
adapt it for Cavy &amp; cavy-cli.</p>
<p>You probably don't need this if your app is purely a React Native app
and you have no existing native tests. You can probably just use cavy-cli
instead.</p>
<h2><a class="anchor" aria-hidden="true" id="installing"></a><a href="#installing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing</h2>
<p>To get started using Cavy with native reporting, install using <code>yarn</code>:</p>
<pre><code class="hljs">yarn add cavy cavy-native-reporter --dev
</code></pre>
<p>or <code>npm</code>:</p>
<pre><code class="hljs">npm i --save-dev cavy cavy-native-reporter
</code></pre>
<p>Then link the package:</p>
<pre><code class="hljs">react-native link cavy-native-reporter
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<p>Take a look at <a href="https://github.com/pixielabs/cavy-native-reporter/tree/master/sampleApp">the cavy-native-reporter sample app</a>
for a full example of how you may want to integrate cavy-native-reporter into
your native testing setup.</p>
<h3><a class="anchor" aria-hidden="true" id="1-set-up-cavy"></a><a href="#1-set-up-cavy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Set up Cavy</h3>
<p>First off, follow the instructions in <a href="/docs/getting-started/setting-cavy-up">Getting Started</a>
to set up a testing entry point for your app and write your tests.</p>
<h3><a class="anchor" aria-hidden="true" id="2-import-and-set-up-cavynativereporter"></a><a href="#2-import-and-set-up-cavynativereporter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Import and set up <code>CavyNativeReporter</code></h3>
<p>The module <code>CavyNativeReporter</code> has a method <code>reporter</code>, that takes the test report
and calls a callback function that you can define in your native tester code.</p>
<p>In your <code>index.test.js</code>, import <code>CavyNativeReporter</code> and set the Tester's <code>reporter</code>
prop to use the native reporter:</p>
<pre><code class="hljs css language-jsx"><span class="token comment">// index.test.js</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppRegistry <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Tester<span class="token punctuation">,</span> TestHookStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'cavy'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> IntegrationSpecs <span class="token keyword">from</span> <span class="token string">'./specs/IntegrationSpecs'</span><span class="token punctuation">;</span>

<span class="token comment">// Extra import for cavy-native-reporter:</span>
<span class="token keyword">import</span> CavyNativeReporter <span class="token keyword">from</span> <span class="token string">'cavy-native-reporter'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> testHookStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestHookStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TestableApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Tester specs<span class="token operator">=</span><span class="token punctuation">{</span>IntegrationSpecs<span class="token punctuation">}</span>
        store<span class="token operator">=</span><span class="token punctuation">{</span>testHookStore<span class="token punctuation">}</span>
        <span class="token comment">// Extra prop for cavy-native reporter:</span>
        reporter<span class="token operator">=</span><span class="token punctuation">{</span>CavyNativeReporter<span class="token punctuation">.</span>reporter<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span><span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tester</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span><span class="token string">'App'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> TestableApp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This will override Cavy's default behaviour of sending test reports to cavy-cli,
allowing you to wire it up to your own native test runner instead.</p>
<h3><a class="anchor" aria-hidden="true" id="3-report-to-native-tests"></a><a href="#3-report-to-native-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Report to native tests</h3>
<p>You're now ready to define where you'd like to send test reports to. You can
have a look at some examples of how to set this up here:</p>
<ul>
<li><a href="./reporting-to-ios-xctest-objective-c">iOS XCTest (Objective C)</a></li>
<li><a href="./reporting-to-ios-xctest-swift">iOS XCTest (Swift)</a></li>
<li><a href="./reporting-to-android">Android</a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="see-also"></a><a href="#see-also" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>See also</h4>
<ul>
<li><a href="../../api/cavy-native-reporter">CavyNativeReporter API</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/guides/writing-custom-reporters"><span class="arrow-prev">← </span><span>Writing your own custom reporter</span></a><a class="docs-next button" href="/docs/guides/cavy-native-reporter/reporting-to-ios-xctest-objective-c"><span class="function-name-prevnext">iOS XCTest example (Obj-C)</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#when-would-i-want-to-use-cavy-native-reporter">When would I want to use Cavy Native Reporter?</a></li><li><a href="#installing">Installing</a></li><li><a href="#usage">Usage</a><ul class="toc-headings"><li><a href="#1-set-up-cavy">1. Set up Cavy</a></li><li><a href="#2-import-and-set-up-cavynativereporter">2. Import and set up <code>CavyNativeReporter</code></a></li><li><a href="#3-report-to-native-tests">3. Report to native tests</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.ico" alt="Cavy" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/getting-started/installing">Getting Started</a><a href="/docs/guides/writing-spec-helpers">Guides</a><a href="/docs/api/commands">API Reference</a></div><div><h5>Community</h5><a href="/help">Help</a><a href="/contributors">Contributors</a><a href="/media">Further reading</a></div><div><h5>More</h5><a href="https://github.com/pixielabs/cavy">GitHub</a><div><a class="github-button" href="https://github.com/pixielabs/cavy" data-icon="octicon-star" data-count-href="/pixielabs/cavy/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div><div><a class="github-button" href="https://github.com/pixielabs" aria-label="Follow @pixielabs on GitHub">Follow @pixielabs</a></div><div><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="Up and testing in no time at all with Cavy!" data-url="https://cavy.app" data-via="pixielabs" data-hashtags="reactnative" data-related="" data-show-count="false">Tweet</a><script async="" src="https://platform.twitter.com/widgets.js" charSet="utf-8"></script></div></div></section><section class="copyright">Copyright © 2019 Pixie Labs</section></footer></div></body></html>